[English](../../CHANGELOG.md) | [中文](CHANGELOG.md)

# 更新日志

## [1.0.21]

### 新增

- **多实例支持**：添加对多个 MCP 实例并发运行的支持
- **动态 DATA_DIR 参数**：为所有数据访问工具添加可选的 `dataDir` 参数
- **文件锁机制**：实现文件锁机制防止并发写入冲突，确保数据一致性
- **工具参数设计文档**：新增详细的工具参数设计指南和最佳实践文档

### 变更

- **重构 taskModel**：重构 taskModel.ts 以支持动态 DATA_DIR，消除全局变量依赖
- **并发安全优化**：所有文件操作现在使用安全的文件读写函数，支持并发访问
- **向后兼容**：所有新参数都是可选的，确保现有代码无需修改即可继续工作

### 技术改进

- 引入 `FileLock` 类确保文件访问的原子性
- 添加 `safeReadJsonFile` 和 `safeWriteJsonFile` 等安全文件操作函数
- 优化路径解析逻辑，支持相对路径和绝对路径
- 增强错误处理和资源管理

## [1.0.20]

### 新增

- 新增重置按钮和缩略图
- 增强关系依赖图和任务列表交互，筛选和点击任务列表使关系依赖图响应变化

### 变更

- 移除关系依赖图开头动画，避免动画跳变
- 优化关系依赖图初始状态

## [1.0.19]

### 新增

- 新增研究模式功能，用于系统性程序编程研究 (5267fa4)
- 新增研究模式的英文和中文提示词模板 (5267fa4)
- 新增完整的研究模式文档和使用指南 (288bec9)

### 变更

- 增强 README，新增研究模式功能描述和使用说明 (288bec9)
- 更新中文文档，包含研究模式功能说明 (288bec9)

## [1.0.18]

### 修复

- 修复 #29：移除不必要的 console.log 输出以减少杂讯 (7cf1a18)
- 修复 #28：修正 WebGUI 任务详情检视的国际化问题 (fd26bfa)

### 变更

- 增强 WebGUI 任务详情检视，为所有标签使用适当的翻译函数 (fd26bfa)
- 更新思维过程阶段描述为英文，提升一致性 (fd26bfa)

## [1.0.17]

### 修复

- 修复 #26：修正 WebGUI 中任务状态显示为中文的问题 (16913ad)
- 修复 #26：优化 WebGUI 预设语系会根据环境变数 TEMPLATES_USE 设定改变 (51436bb)

### 变更

- 更新 .env.example 以包含语系设定说明文档 (51436bb)
- 增强 WebGUI 语言处理逻辑，提供更好的国际化支持 (51436bb)

## [1.0.16]

### 修复

- 修复：修正 Augment AI 不支持 uuid format 问题，改用自定义正则表达式进行验证 (4264fa7)

### 变更

- 更新任务规划相关提示词，新增严重警告以禁止假设、猜测与幻想，强调必须使用可用工具收集真实信息 (cb838cb)
- 调整任务描述以更清楚表达任务目标 (cb838cb)
- 优化错误信息提示，增加分批呼叫建议以解决长文本格式问题 (cb838cb)

## [1.0.15]

### 修复

- 修复：修正 gemini-2.5-pro-preview-05-06 会跳过执行任务直接完成的错误 (6d8a422)
- 修复问题 #20 (5d1c28d)

### 变更

- 将 rule.md 改为存放至根目录，这样 DATA_DIR 才可以放置在项目外为后续协作架构做准备 (313e338)
- 更新文档 (28984f)

## [1.0.14]

### 变更

- 优化提示词以减少 token 使用量并改进指导内容。 (662b3be, 7842e0d)
- 更新英文提示词，提升清晰度与效率。 (7842e0d)
- 重构工具架构，提高组织性与可维护性。 (04f55cb)
- 优化工作流程，减少不必要步骤。 (3037d4e)

### 移除

- 移除未使用的程序代码与文件。 (ea40e78)

## [1.0.13]

### 修复

- 修复：修正 invariantlabs 误判问题 (148f0cd)

## [1.0.12]

### 新增

- 新增虾米任务管理器示范影片链接至 README 和中文 README，并新增示范影片图片文件。 (406eb46)
- 新增 JSON 格式注意事项，强调禁止注解及特殊字符转义要求，以避免解析失败。 (a328322)
- 新增网页图形界面功能，通过环境变数 `ENABLE_GUI` 控制。 (bf5f367)

### 移除

- 移除多处不必要的错误日志输出，避免 Cursor 报错。 (552eed8)

## [1.0.11]

### 变更

- 移除不再使用的函数。 (f8d9c8)

### 修复

- 修复：修正 Cursor Console 不支持中文的问题。 (00943e1)

## [1.0.10]

### 变更

- 新增项目规则更新模式指南，强调递归检查所有资料夹与文件，并规范模糊请求的自主处理流程。 (989af20)
- 新增提示词语言与客制化说明，更新 README 和中文文档。 (d0c3bfa)
- 新增 `TEMPLATES_USE` 配置选项以支持自定义提示词模板，更新 README 和中文文档。 (76315fe)
- 新增多语系支持的任务模板 (英/中)。 (291c5ee)
- 新增多个任务相关的 prompt 生成器及模板 (删除、清除、更新任务)。 (a51110f, 52994d5, 304e0cd)
- 调整任务模板为 Markdown 格式，方便多语系支持与修改。 (5513235)
- 调整 `split_tasks` 工具的「分批提交」参数限制，从 8000 字减少至 5000 字。 (a395686)
- 移除不再使用的更新任务相关文件工具。 (fc1a5c8)
- 更新 README 和中文文档：新增「推荐模型」、链接 MIT 许可协议、新增 Star History、新增目录与标签、强化使用指南。 (5c61b3e, f0283ff, 0bad188, 31065fa)
- 更新任务内容描述：允许已完成任务更新相关文件摘要，调整思考流程描述。 (b07672c)
- 更新任务模板：新增「请严格遵守以下指导」提示，强化指导性。 (f0283ff)

### 修复

- 修正部分模型可能不遵守流程的问题。 (ffd6349)
- 修复 #6：修正简繁中文导致 Enum 判断参数错误问题。 (dae3756)

## [1.0.8]

### 新增

- 新增 zod-to-json-schema 依赖项，用于更好的结构定义整合
- 新增详细的任务拆分指南，改善任务管理体验
- 新增更强大的 Agent 工具呼叫错误处理机制

### 变更

- 更新 MCP SDK 整合方式，提升错误处理和兼容性
- 改进任务实现提示模板，使指令更加清晰
- 优化任务拆分工具描述和参数验证

### 修复

- 修复问题 #5，修正部分 Agent 无法正常处理错误的问题
- 修复模板文件中的行格式，提高可读性

## [1.0.7]

### 新增

- 新增思维链过程功能，用于系统性问题分析
- 新增项目规范初始化功能，用于维护项目一致性

### 变更

- 更新相关文档，强调系统性问题分析与项目一致性维护
- 调整工具列表，包含新功能
- 更新 .gitignore，排除不必要的资料夹
